function Bhdr(t){var n=this,r={},o=1;n.prototype={init:function(){return this},add:function(t,n){var o=t.prototype.constructor.name;return r[o]||(r[o]={}),n instanceof t&&(r[o][e(t)]=n),n},remove:function(t,n){var o=t.prototype.constructor.name;return r[o]&&n instanceof t&&Object.keys(r[o]).forEach(function(t){r[o][t]===n&&delete r[o][t]}),n},findBy:function(t,n){var o=t.prototype.constructor.name,e=[];return r[o]&&Object.keys(n).forEach(function(t){Object.keys(r[o]).forEach(function(i){r[o][i][t]&&r[o][i][t]===n[t]&&e.push(r[o][i])})}),e.unique()},findByILike:function(t,n){var o=t.prototype.constructor.name,e=[],i=[],u=[];return Object.keys(r[o]).forEach(function(t){"id"!==t&&e.push(r[o][t])}),r[o]&&(Object.keys(n).forEach(function(t){e.forEach(function(r){r[t]&&-1!==r[t].toString().toLowerCase().indexOf(n[t].toString().toLowerCase())&&i.push(r)}),e=i,i=[]}),u=e),u.unique()},findAll:function(t){var n=t.prototype.constructor.name,o=[];return r[n]&&Object.keys(r[n]).forEach(function(t){"id"!==t&&o.push(r[n][t])}),o.unique()},map:function(t){return t.add=function(r){return n.prototype.add(t,r)},t.remove=function(r){return n.prototype.remove(t,r)},t.findBy=function(r){return n.prototype.findBy(t,r)},t.findByILike=function(r){return n.prototype.findByILike(t,r)},t.findAll=function(){return n.prototype.findAll(t)},t.get=function(r){return n.prototype.get(t,r)},t.prototype.save=function(){return t.add(this)},t.prototype["delete"]=function(){return t.remove(this)},t},get:function(t,n){var o=t.prototype.constructor.name;return r[o]?r[o][n]||null:null},exportAs:function(t){var n;switch(t){case"javascript":n=r;break;case"json":n=JSON.stringify(r);break;case"bwf":var o=JSON.stringify(r).trim().split(/"/).join(" ").split(/{/).join(" { ").split(/}/).join(" } ").split(/\[/).join(" [ ").split(/\]/).join(" ] ").split(/ :/).join(": ").split(/ ,/).join(", ").split(/  /).join(" ").trim();n="Bhdr: "+o;break;default:n=JSON.stringify(r)}return n}};var e=function(t){var n=t.prototype.constructor.name;return r[n]?r[n].id?r[n].id=r[n].id+1:r[n].id=o:r[n]={id:o},r[n].id};return n.prototype.init()}!function(){Array.prototype.remove=function(t){var n=this.indexOf(t);return n>-1?this.splice(n,1):[]},Array.prototype.unique=function(){return this.sort().filter(function(t,n,r){return!n||t!=r[n-1]})}}();
