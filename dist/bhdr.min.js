function Bhdr(t){var n=this,r={},o=1;n.prototype={init:function(){return this},"instanceof":function(t){return"Bhdr"===t.prototype.constructor.name},createTable:function(t,n){var e=t.prototype.constructor.name;return r[e]?r[e]:(r[e]={id:o},n?n(r[e]):r[e])},dropTable:function(t,n){var o=t.prototype.constructor.name;return r[o]&&(n&&n(r[o]),delete r[o]),null},alterTable:function(t,n,o){var e=t.prototype.constructor.name;return r[e]?(Object.keys(n).forEach(function(t){"tableName"===t?(r[n.tableName]=r[e],delete r[e],e=n.tableName):r[e]&&Object.keys(r[e]).forEach(function(o){Object.keys(r[e][o]).forEach(function(i){i===t&&(r[e][o][n[t]]=r[e][o][i],delete r[e][o][i])})})}),o?o(r[e]):r[e]):null},insert:function(t,n,o){var i=t.prototype.constructor.name;return r[i]||(r[i]={}),n instanceof t?(r[i][e(t)]=n,o?o(n):n):n},"delete":function(t,n,o){var e=t.prototype.constructor.name;return r[e]&&n instanceof t&&Object.keys(r[e]).forEach(function(t){return r[e][t]===n?(delete r[e][t],o?o(n):n):void 0}),n},find:function(t,r){var o=n.prototype.findBy(t,r)||[];return o.length>0?o[0]:null},findBy:function(t,n){var o=t.prototype.constructor.name,e=[];return r[o]&&Object.keys(n).forEach(function(t){Object.keys(r[o]).forEach(function(i){r[o][i][t]&&r[o][i][t]===n[t]&&e.push(r[o][i])})}),e},findByI:function(t,n){var o=t.prototype.constructor.name,e=[];return r[o]&&Object.keys(n).forEach(function(t){Object.keys(r[o]).forEach(function(i){r[o][i][t]&&r[o][i][t].toString().toLowerCase()===n[t].toString().toLowerCase()&&e.push(r[o][i])})}),e},findByLike:function(t,n){var o=t.prototype.constructor.name,e=[],i=[],c=[];return Object.keys(r[o]).forEach(function(t){"id"!==t&&e.push(r[o][t])}),r[o]&&(Object.keys(n).forEach(function(t){e.forEach(function(r){r[t]&&-1!==r[t].toString().indexOf(n[t].toString())&&i.push(r)}),e=i,i=[]}),c=e),c},findByILike:function(t,n){var o=t.prototype.constructor.name,e=[],i=[],c=[];return Object.keys(r[o]).forEach(function(t){"id"!==t&&e.push(r[o][t])}),r[o]&&(Object.keys(n).forEach(function(t){e.forEach(function(r){r[t]&&-1!==r[t].toString().toLowerCase().indexOf(n[t].toString().toLowerCase())&&i.push(r)}),e=i,i=[]}),c=e),c},findAll:function(t){var n=t.prototype.constructor.name,o=[];return r[n]&&Object.keys(r[n]).forEach(function(t){"id"!==t&&o.push(r[n][t])}),o},findWhere:function(t,n){var o=t.prototype.constructor.name,e=[];return r[o]&&Object.keys(r[o]).forEach(function(t){"id"!==t&&n(r[o][t])&&e.push(r[o][t])}),e},map:function(t){return t.add=function(r,o){return n.prototype.insert(t,r,o)},t.remove=function(r,o){return n.prototype["delete"](t,r,o)},t.find=function(r){return n.prototype.find(t,r)},t.findBy=function(r){return n.prototype.findBy(t,r)},t.findByI=function(r){return n.prototype.findByI(t,r)},t.findByLike=function(r){return n.prototype.findByLike(t,r)},t.findByILike=function(r){return n.prototype.findByILike(t,r)},t.findAll=function(){return n.prototype.findAll(t)},t.findWhere=function(r){return n.prototype.findWhere(t,r)},t.get=function(r){return n.prototype.get(t,r)},t.prototype.save=function(n){return t.add(this,n)},t.prototype["delete"]=function(n){return t.remove(this,n)},t.createTable=function(r){return n.prototype.createTable(t,r)},t.dropTable=function(r){return n.prototype.dropTable(t,r)},Object.keys(t.prototype).forEach(function(n){Array.prototype[n]=Array.prototype[n]||function(){if(this[0])if(this[0]["instanceof"]){if(this[0]["instanceof"](t))return this.map(function(t){return t[n]})}else if(this[0]instanceof t)return this.map(function(t){return t[n]});return[]}}),t},get:function(t,n){var o=t.prototype.constructor.name;return r[o]?r[o][n]||null:null},exportAs:function(t){var n;switch(t){case"javascript":n=r;break;case"json":n=JSON.stringify(r);break;case"bwf":var o=JSON.stringify(r).trim().split(/"/).join(" ").split(/{/).join(" { ").split(/}/).join(" } ").split(/\[/).join(" [ ").split(/\]/).join(" ] ").split(/ :/).join(": ").split(/ ,/).join(", ").split(/  /).join(" ").trim();n="Bhdr: "+o}return n}};var e=function(t){var n=t.prototype.constructor.name;return r[n]?r[n].id?r[n].id=r[n].id+1:r[n].id=o:r[n]={id:o},r[n].id};return n.prototype.init()}!function(){Array.prototype.remove=function(t){var n=this.indexOf(t);return n>-1?this.splice(n,1):[]},Array.prototype.distinct=function(){return this.sort().filter(function(t,n,r){return!n||t!=r[n-1]})},Array.prototype.count=function(){return this.length||0},Array.prototype.orderBy=function(t,n,r){var o=r?function(n){return r(n[t])}:function(n){return n[t]};return n="desc"===n?-1:1,this.sort(function(t,r){return t=o(t),r=o(r),n*((t>r)-(r>t))})},Array.prototype.avg=function(t){if(this.count()>0){var n=[];return this.forEach(function(r){n.push(r[t])}),n.reduce(function(t,n){return t+n})/this.count()}return 0}}();